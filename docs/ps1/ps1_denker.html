<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<h1><a href="#problem-set-1" id="problem-set-1">Problem Set 1</a></h1>
<p>Course: ECON 8848<br />
Author: Hannah Denker<br />
Collaborators: Michelle Doughty &amp; Dan Mangan<br />
Date: 27 Jan 2021</p>
<h2><a href="#1-load-data-examine-data-restrict-sample" id="1-load-data-examine-data-restrict-sample">1. Load Data, Examine Data, &amp; Restrict Sample</a></h2>
<pre><code>.         ***Load Data for Analysis 
.         use &quot;${datapath}acs2007.dta&quot;, clear     

. 
.         ***Run command that gives basic info about dataset (#obs, vars, storing)
.         describe

Contains data from /Users/hannahdenker/Google Drive/Coursework/Yr4: Spring 2021/MicroEcon/5. Datasets/acs2007.dta
  obs:     2,913,425                          
 vars:            14                          18 Aug 2009 16:53
 size:    90,316,175                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
year            int     %8.0g      yearlbl    Census year
datanum         byte    %8.0g                 Data set number
serial          double  %10.0g                Household serial number
hhwt            int     %8.0g                 Household weight
gq              byte    %43.0g     gqlbl      Group quarters status
perwt           int     %8.0g                 Person weight
age             int     %36.0g     agelbl     Age
sex             byte    %8.0g      sexlbl     Sex
marst           byte    %23.0g     marstlbl   Marital status
bpl             long    %27.0g     bpllbl     Birthplace [general version]
yrsusa1         byte    %8.0g                 Years in the United States
educrec         byte    %23.0g     educreclbl
                                              Educational attainment recode
empstat         byte    %18.0g     empstatlbl
                                              Employment status [general version]
incwage         long    %12.0g                Wage and salary income
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: 

</code></pre>
<h3><a href="#1a-how-many-obs-and-how-many-vars-does-this-dataset-contain" id="1a-how-many-obs-and-how-many-vars-does-this-dataset-contain">1A. How many obs. and how many vars does this dataset contain?</a></h3>
<p>The dataset has    2,913,425 observations and 14 variables.</p>
<h3><a href="#1b-are-all-of-the-variables-stored-in-the-proper-format" id="1b-are-all-of-the-variables-stored-in-the-proper-format">1B. Are all of the variables stored in the proper format?</a></h3>
<p>All of the variables appear to be ready for analysis as the variables we would expect to be numeric are not coded as strings. I like to compress the data so all variables are stored as efficiently as possible.</p>
<pre><code>.         compress
  variable age was int now byte
  variable bpl was long now int
  variable serial was double now long
  (20,393,975 bytes saved)

</code></pre>
<h3><a href="#1c-do-you-see-any-strange-coding-of-missing-or-top-coded-variables-such-as-negative-values-or-very-high-values-eg-999999" id="1c-do-you-see-any-strange-coding-of-missing-or-top-coded-variables-such-as-negative-values-or-very-high-values-eg-999999">1C. Do you see any strange coding of missing or top-coded variables, such as negative values or very high values (e.g. 999999)?</a></h3>
<pre><code>.         su

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |  2,913,425        2007           0       2007       2007
     datanum |  2,913,425           1           0          1          1
      serial |  2,913,425    675543.4    395790.3          4    1360285
        hhwt |  2,913,425    97.06509    66.08678          1       1466
          gq |  2,913,425    1.001459    .0464898          1          5
-------------+---------------------------------------------------------
       perwt |  2,913,425    100.7405    70.77215          1       2032
         age |  2,913,425    38.89746    23.06821          0         95
         sex |  2,913,425    1.517572    .4996912          1          2
       marst |  2,913,425     3.49533    2.326408          1          6
         bpl |  2,913,425    67.13137    117.2534          1        950
-------------+---------------------------------------------------------
     yrsusa1 |  2,913,425    2.457155    8.571573          0         88
     educrec |  2,913,425    6.232514    2.705586          0          9
     empstat |  2,913,425    1.386688    1.106982          0          3
     incwage |  2,913,425      231183    398774.6          0     999999

</code></pre>
<p>We notice that sex is coded as &ldquo;1&rdquo; or &ldquo;2&rdquo;, and we would want to recode this variable to equal either 0 or 1 for analysis since doing so will make analysis using this variable easier. This variable will be recoded below.</p>
<p>Additionally, there is one variable &ldquo;incwage&rdquo; that seems to indicate missingness with the code 999999. Although this isn&rsquo;t required for the PSET, I&rsquo;m going to replace missing values in this var with the &ldquo;.&rdquo; Stata recognizes as missing.</p>
<pre><code>. ***Replacing missing values with . in incwage
.         su incwage, detail

                   Wage and salary income
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs           2,913,425
25%            0              0       Sum of Wgt.   2,913,425

50%        25298                      Mean             231183
                        Largest       Std. Dev.      398774.6
75%        91072         999999
90%       999999         999999       Variance       1.59e+11
95%       999999         999999       Skewness        1.39073
99%       999999         999999       Kurtosis       2.970799

.         replace incwage=. if incwage==999999
(612,850 real changes made, 612,850 to missing)

</code></pre>
<h3><a href="#1d-which-parts-of-the-summary-results-are-most-useful-for-determining-whether-you-need-to-recode-missing-values" id="1d-which-parts-of-the-summary-results-are-most-useful-for-determining-whether-you-need-to-recode-missing-values">1D. Which parts of the summary results are most useful for determining whether you need to recode missing values?</a></h3>
<p>The minimum and the maximum values are the most useful results for recoding.</p>
<h3><a href="#1e-what-is-the-age-range-in-your-sample" id="1e-what-is-the-age-range-in-your-sample">1E. What is the age range in your sample?</a></h3>
<p>The age range in the sample is    0 to 95.</p>
<h3><a href="#1f-restrict-the-sample-to-employed-people-of-working-age" id="1f-restrict-the-sample-to-employed-people-of-working-age">1F. Restrict the Sample to Employed People of Working Age</a></h3>
<pre><code>. ***Eliminate obs who are younger than 18 and older than 55
.         drop if age&lt;18 | age&gt;55
(1,462,460 observations deleted)

.         sum age, detail 

                             Age
-------------------------------------------------------------
      Percentiles      Smallest
 1%           18             18
 5%           20             18
10%           22             18       Obs           1,450,965
25%           29             18       Sum of Wgt.   1,450,965

50%           39                      Mean           37.93409
                        Largest       Std. Dev.      10.92435
75%           47             55
90%           52             55       Variance       119.3414
95%           54             55       Skewness      -.1993654
99%           55             55       Kurtosis       1.843981

.         // check to ensure drop worked correctly
.         ***Eliminate obs who are not employed
.         tab empstat

 Employment status |
 [general version] |      Freq.     Percent        Cum.
-------------------+-----------------------------------
          Employed |  1,105,144       76.17       76.17
        Unemployed |     69,157        4.77       80.93
Not in labor force |    276,664       19.07      100.00
-------------------+-----------------------------------
             Total |  1,450,965      100.00

.         tab empstat, nolab 

 Employment |
     status |
   [general |
   version] |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |  1,105,144       76.17       76.17
          2 |     69,157        4.77       80.93
          3 |    276,664       19.07      100.00
------------+-----------------------------------
      Total |  1,450,965      100.00

.         // determine which value reps. &quot;employed&quot;; could also codebook this var to figure this out...
.         keep if empstat==1
(345,821 observations deleted)

.         tab empstat, mi

 Employment status |
 [general version] |      Freq.     Percent        Cum.
-------------------+-----------------------------------
          Employed |  1,105,144      100.00      100.00
-------------------+-----------------------------------
             Total |  1,105,144      100.00

.         // check to make sure only employed obs were kept. 
</code></pre>
<h2><a href="#2-create-new-vars" id="2-create-new-vars">2. Create New Vars</a></h2>
<pre><code>.         ***Create dummy called &quot;female&quot; where 1=female and 0=male
.         cap drop female

.         recode sex (2=1) (1=0), gen(female)
(1105144 differences between sex and female)

.         ***Add value labels to female var
.         lab def female_lab 1 &quot;1= female&quot; 0 &quot;0= male&quot;, replace

.         lab val female female_lab

.         lab var female &quot;Gender dum: 1= female 0= male&quot;

.         ***Tab female var to check value labels &amp; coded correctly
.         tab female sex, mi

    Gender |
   dum: 1= |
 female 0= |          Sex
      male |      Male     Female |     Total
-----------+----------------------+----------
   0= male |   578,722          0 |   578,722 
 1= female |         0    526,422 |   526,422 
-----------+----------------------+----------
     Total |   578,722    526,422 | 1,105,144 

.         ***Create dummy var called &quot;immigrant&quot; where 1=immigrant 0=US born
.         browse bpl yrsusa1 

. /*
&gt; bpl includes countries of birth &amp; US states of birth yrsusa1=0 if person born in USA &gt;=1 if foreign born easier to use yrsusa1 to create immigrant dummy
&gt; I also want to figure out what the max val is for foreign-born country categories to use in recoding below
&gt; */      
.                                            
.         sum yrsusa1                                        

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     yrsusa1 |  1,105,144    2.757624    7.921907          0         56

.         cap drop immigrant

.         recode yrsusa1 (1/56=1), gen(immigrant) 
(165416 differences between yrsusa1 and immigrant)

.         ***Add value labels to values of immigrant var
.         lab def immigrant_lab 1 &quot;1= immigrant&quot; 0 &quot;0= US born&quot;, replace

.         lab val immigrant immigrant_lab  

.         lab var immigrant &quot;Immigrant dum: 1= immigrant 0= US born&quot;              

.         ***Check that immigrant was coded correctly
.         bysort immigrant: tab immigrant yrsusa1, mi

-----------------------------------------------------------------------------------------------------------------------------------------------------------------
-&gt; immigrant = 0= US born

   Immigrant |  Years in
     dum: 1= | the United
immigrant 0= |   States
     US born |         0 |     Total
-------------+-----------+----------
  0= US born |   935,723 |   935,723 
-------------+-----------+----------
       Total |   935,723 |   935,723 

-----------------------------------------------------------------------------------------------------------------------------------------------------------------
-&gt; immigrant = 1= immigrant

   Immigrant |
     dum: 1= |
immigrant 0= |                                                     Years in the United States
     US born |         1          2          3          4          5          6          7          8          9         10         11         12 |     Total
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
1= immigrant |     4,005      4,611      4,706      4,666      5,062      6,009      7,814      6,416      5,657      5,719      5,010      5,410 |   169,421 
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
       Total |     4,005      4,611      4,706      4,666      5,062      6,009      7,814      6,416      5,657      5,719      5,010      5,410 |   169,421 


   Immigrant |
     dum: 1= |
immigrant 0= |                                                     Years in the United States
     US born |        13         14         15         16         17         18         19         20         21         22         23         24 |     Total
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
1= immigrant |     4,614      4,432      5,275      4,746      6,566      5,975      4,715      4,792      4,526      4,992      3,763      3,105 |   169,421 
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
       Total |     4,614      4,432      5,275      4,746      6,566      5,975      4,715      4,792      4,526      4,992      3,763      3,105 |   169,421 


   Immigrant |
     dum: 1= |
immigrant 0= |                                                     Years in the United States
     US born |        25         26         27         28         29         30         31         32         33         34         35         36 |     Total
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
1= immigrant |     3,723      3,729      5,784      3,591      2,837      2,275      2,151      2,637      1,894      1,608      1,687      1,227 |   169,421 
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
       Total |     3,723      3,729      5,784      3,591      2,837      2,275      2,151      2,637      1,894      1,608      1,687      1,227 |   169,421 


   Immigrant |
     dum: 1= |
immigrant 0= |                                                     Years in the United States
     US born |        37         38         39         40         41         42         43         44         45         46         47         48 |     Total
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
1= immigrant |     1,794      1,256      1,146      1,012      1,005        861        768        809        795        689        739        560 |   169,421 
-------------+------------------------------------------------------------------------------------------------------------------------------------+----------
       Total |     1,794      1,256      1,146      1,012      1,005        861        768        809        795        689        739        560 |   169,421 


   Immigrant |
     dum: 1= |
immigrant 0= |                               Years in the United States
     US born |        49         50         51         52         53         54         55         56 |     Total
-------------+----------------------------------------------------------------------------------------+----------
1= immigrant |       508        469        471        328        236        143         77         26 |   169,421 
-------------+----------------------------------------------------------------------------------------+----------
       Total |       508        469        471        328        236        143         77         26 |   169,421 


.                         
.         ***Use recode to create new variable called &quot;educyears&quot; where...
.         /*
&gt;                 No schooling, none, preschool =0 
&gt;                 Grade 1-4 =2.5 
&gt;                 Grade 5-8 =6.5
&gt;                 Grade   9 =9
&gt;                 Grade  10 =10
&gt;                 Grade  11 =11
&gt;                 Grade  12 =12
&gt;                 1-3 yrs college =14
&gt;                 4+ yrs college =16      
&gt;         */
.                                 
.         ***Check numbering of categories of edurec var
.         tab educrec

 Educational attainment |
                 recode |      Freq.     Percent        Cum.
------------------------+-----------------------------------
      None or preschool |      3,729        0.34        0.34
    Grade 1, 2, 3, or 4 |      4,034        0.37        0.70
    Grade 5, 6, 7, or 8 |     22,240        2.01        2.71
                Grade 9 |     13,029        1.18        3.89
               Grade 10 |     15,277        1.38        5.28
               Grade 11 |     21,684        1.96        7.24
               Grade 12 |    320,379       28.99       36.23
1 to 3 years of college |    351,345       31.79       68.02
    4+ years of college |    353,427       31.98      100.00
------------------------+-----------------------------------
                  Total |  1,105,144      100.00

.         tab educrec, nolab

Educational |
 attainment |
     recode |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      3,729        0.34        0.34
          2 |      4,034        0.37        0.70
          3 |     22,240        2.01        2.71
          4 |     13,029        1.18        3.89
          5 |     15,277        1.38        5.28
          6 |     21,684        1.96        7.24
          7 |    320,379       28.99       36.23
          8 |    351,345       31.79       68.02
          9 |    353,427       31.98      100.00
------------+-----------------------------------
      Total |  1,105,144      100.00

.         cap drop educyears

.         recode   educrec (1=0) (2=2.5) (3=6.5) (4=9) (5=10) (6=11) (7=12) (8=14) (9=16), gen(educyears)
(1105144 differences between educrec and educyears)

.         //Can't add value labels to these values as is because they include decimals.           
. 
.         ***Label var educyears
.         lab var educyears &quot;Education in years&quot;    

.         ***Check that educyears was coded correctly
.         tab educrec educyears, mi

          Educational |                                         Education in years
    attainment recode |         0        2.5        6.5          9         10         11         12         14         16 |     Total
----------------------+---------------------------------------------------------------------------------------------------+----------
    None or preschool |     3,729          0          0          0          0          0          0          0          0 |     3,729 
  Grade 1, 2, 3, or 4 |         0      4,034          0          0          0          0          0          0          0 |     4,034 
  Grade 5, 6, 7, or 8 |         0          0     22,240          0          0          0          0          0          0 |    22,240 
              Grade 9 |         0          0          0     13,029          0          0          0          0          0 |    13,029 
             Grade 10 |         0          0          0          0     15,277          0          0          0          0 |    15,277 
             Grade 11 |         0          0          0          0          0     21,684          0          0          0 |    21,684 
             Grade 12 |         0          0          0          0          0          0    320,379          0          0 |   320,379 
1 to 3 years of colle |         0          0          0          0          0          0          0    351,345          0 |   351,345 
  4+ years of college |         0          0          0          0          0          0          0          0    353,427 |   353,427 
----------------------+---------------------------------------------------------------------------------------------------+----------
                Total |     3,729      4,034     22,240     13,029     15,277     21,684    320,379    351,345    353,427 | 1,105,144 

.         ***Create var called &quot;exper&quot;=age-educyears-6
.         cap drop exper

.         generate exper=age-educyears-6  

.         ***Check subset of sample to make sure exper was coded correctly. 
.         forvalues x = 0 9 to 11 {
  2.                 browse age educyears exper if educyears==`x'
  3.                         *di in red &quot;Check that age + educyears + 6 = exper, then q to cont.&quot;
.                         *pause  
.         } // closes forvalues x loop                    

.         ***Label new &quot;exper&quot; var &quot;Potential Experience&quot;
.         lab var exper &quot;Potential Experience&quot;    

. /*
&gt; &quot;Exper&quot; has negative values in the minimums, which maybe we would want to change to zero, but I'm going to leave it as is for this assignemnt. 
&gt; */                                                              
.         ***Create var called &quot;expersq&quot; that is the square of the person's potential experience
.         cap drop expersq

.         generate expersq=(exper)^2

.         browse exper expersq

.         ***Label &quot;expersq&quot; var
.         lab var expersq &quot;Potential Experience Squared&quot;

.         ***Create var &quot;logearn&quot;= natural log of wage and salary (incwage)
.         cap drop logearn

.         generate logearn=ln(incwage)
(61,932 missing values generated)

</code></pre>
<h3><a href="#2a-stata-reminds-you-that-prev-command-resulted-in-missing-vals-why-were-these-created" id="2a-stata-reminds-you-that-prev-command-resulted-in-missing-vals-why-were-these-created">2A. Stata reminds you that prev. command resulted in missing vals. Why were these created?</a></h3>
<p>The missing values in &ldquo;logearn&rdquo; result from observations where &ldquo;incwage&rdquo; is equal to 0 or missing.</p>
<pre><code>.         ***Lab logearn var
.         lab var logearn &quot;Log of Annual Earnings&quot;

.         ***Save Generated Dataset
.         compress
  (0 bytes saved)

.         save &quot;${gendatapath}acsrecoded.dta&quot;, replace
file /Users/hannahdenker/Google Drive/Coursework/Yr4: Spring 2021/MicroEcon/7. Generated Datasets/acsrecoded.dta saved

</code></pre>
<h2><a href="#3-basic-analysis" id="3-basic-analysis">3. Basic Analysis</a></h2>
<pre><code>.         ***Run regression w y=logearn controlling for educyears exper expersq
.         glob xvars &quot;educyears exper expersq&quot;

.         su $xvars

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   educyears |  1,105,144    13.64656    2.298358          0         16
       exper |  1,105,144    18.83956    10.66389         -3         49
     expersq |  1,105,144    468.6473     400.062          0       2401

.         reg logearn $xvars

      Source |       SS           df       MS      Number of obs   = 1,043,212
-------------+----------------------------------   F(3, 1043208)   &gt;  99999.00
       Model |  285321.589         3  95107.1962   Prob &gt; F        =    0.0000
    Residual |  847375.794 1,043,208  .812278849   R-squared       =    0.2519
-------------+----------------------------------   Adj R-squared   =    0.2519
       Total |  1132697.38 1,043,211  1.08577975   Root MSE        =    .90127

------------------------------------------------------------------------------
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   educyears |   .1418801    .000401   353.82   0.000     .1410941     .142666
       exper |   .1079658   .0003098   348.56   0.000     .1073587    .1085729
     expersq |  -.0020902   8.39e-06  -249.10   0.000    -.0021067   -.0020738
       _cons |   7.290563   .0059007  1235.54   0.000     7.278998    7.302128
------------------------------------------------------------------------------

</code></pre>
<h3><a href="#3a-what-can-you-learn-from-this-reg-output" id="3a-what-can-you-learn-from-this-reg-output">3A. What can you learn from this reg output?</a></h3>
<p>For every additional year of potential experience a person has, we would expect to see about a 12% positive difference in a person&rsquo;s wage and salary income controlling for years of education. This difference is statistically significant at the p&lt;0.001 level. Expsq&hellip; Educyears&hellip;</p>
<h3><a href="#3b-interpret-coefficient-on-the-female-var" id="3b-interpret-coefficient-on-the-female-var">3B. Interpret coefficient on the &ldquo;female&rdquo; var</a></h3>
<pre><code>.         ***Run regression: y=logearn controlling for educyears exper expersq and female         
.         reg logearn $xvars female

      Source |       SS           df       MS      Number of obs   = 1,043,212
-------------+----------------------------------   F(4, 1043207)   &gt;  99999.00
       Model |  343249.667         4  85812.4169   Prob &gt; F        =    0.0000
    Residual |  789447.715 1,043,207  .756750784   R-squared       =    0.3030
-------------+----------------------------------   Adj R-squared   =    0.3030
       Total |  1132697.38 1,043,211  1.08577975   Root MSE        =    .86991

------------------------------------------------------------------------------
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   educyears |   .1514408   .0003886   389.72   0.000     .1506792    .1522024
       exper |    .104552   .0002992   349.40   0.000     .1039655    .1051385
     expersq |  -.0019921   8.11e-06  -245.73   0.000     -.002008   -.0019762
      female |  -.4736823   .0017121  -276.67   0.000    -.4770379   -.4703267
       _cons |   7.406006   .0057107  1296.86   0.000     7.394813    7.417199
------------------------------------------------------------------------------

</code></pre>
<p>When we control for gender, we see that there for an additional year of potential experience, we would still expect to see about a 12% positive difference in a person&rsquo;s wage and salary when we alos control for years of education. However, we see that being female is associated with about a 51% negative difference in a person&rsquo;a wage and salary when<br />
controlling for years of education and potential experience.</p>
<h3><a href="#3c-interpret-results-for-immigrant-coefficient" id="3c-interpret-results-for-immigrant-coefficient">3C. Interpret results for &ldquo;immigrant&rdquo; coefficient</a></h3>
<pre><code>.         ***Run reg: logearn=y controlling for educyears exper expersq and immigrant
.         reg logearn $xvars immigrant

      Source |       SS           df       MS      Number of obs   = 1,043,212
-------------+----------------------------------   F(4, 1043207)   =  88037.37
       Model |  285861.576         4   71465.394   Prob &gt; F        =    0.0000
    Residual |  846835.807 1,043,207  .811762006   R-squared       =    0.2524
-------------+----------------------------------   Adj R-squared   =    0.2524
       Total |  1132697.38 1,043,211  1.08577975   Root MSE        =    .90098

------------------------------------------------------------------------------
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   educyears |   .1439266   .0004086   352.20   0.000     .1431256    .1447275
       exper |   .1074078   .0003104   346.02   0.000     .1067994    .1080162
     expersq |  -.0020745   8.41e-06  -246.65   0.000     -.002091    -.002058
   immigrant |   .0646707   .0025074    25.79   0.000     .0597562    .0695852
       _cons |     7.2559     .00605  1199.32   0.000     7.244042    7.267757
------------------------------------------------------------------------------

</code></pre>
<p>Being an immigrant is associated with a 9% positive difference in a person&rsquo;s wage and salary when we control for years of education, gender, and potential experience relative to being US born.</p>
