<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    htmlTableOfContents();
} );                        

function htmlTableOfContents( documentRef ) {
    var documentRef = documentRef || document;
    var toc = documentRef.getElementById("toc");
//  Use headings inside <article> only:
//  var headings = [].slice.call(documentRef.body.querySelectorAll('article h1, article h2, article h3, article h4, article h5, article h6'));
    var headings = [].slice.call(documentRef.body.querySelectorAll('h1, h2, h3, h4, h5, h6'));
    headings.forEach(function (heading, index) {
        var ref = "toc" + index;
        if ( heading.hasAttribute( "id" ) ) 
            ref = heading.getAttribute( "id" );
        else
            heading.setAttribute( "id", ref );

        var link = documentRef.createElement( "a" );
        link.setAttribute( "href", "#"+ ref );
        link.textContent = heading.textContent;

        var div = documentRef.createElement( "div" );
        div.setAttribute( "class", heading.tagName.toLowerCase() );
        div.appendChild( link );
        toc.appendChild( div );
    });
}


try {
    module.exports = htmlTableOfContents;
} catch (e) {
    // module.exports is not defined
}
</script>
</head>
<h1><a href="#problem-set-4" id="problem-set-4">Problem Set 4</a></h1>
<p>Course: ECON 8848<br />
Author: Hannah Denker<br />
Collaborators: Michelle Doughty &amp; Dan Mangan<br />
Date: 26 Feb 2021</p>
<nav id="toc"><strong><font size="5">Table of Contents</font></strong></nav>
<pre><code>.         ***Load Data cleaned in PSET 1 for Analysis 
.         use &quot;${gendatapath}acsrecoded.dta&quot;, clear       

.         
</code></pre>
<h2><a href="#schooling-and-earnings" id="schooling-and-earnings">Schooling and Earnings</a></h2>
<h5><a href="#run-a-regression-to-estimate-the-conditional-expectation-of-log-earnings-with-years-of-education-as-the-rhs-variable-treat-years-of-education-as-if-it-were-a-continuous-variable" id="run-a-regression-to-estimate-the-conditional-expectation-of-log-earnings-with-years-of-education-as-the-rhs-variable-treat-years-of-education-as-if-it-were-a-continuous-variable">Run a regression to estimate the conditional expectation of log earnings with years of education as the RHS variable. Treat years of education as if it were a continuous variable.</a></h5>
<pre><code>.         ***These are the three vars of interest. Checking differences beween &quot;educyears&quot; and &quot;educrec&quot; vars. Output not shown
.         qui tab  educyears  educrec

.         qui sum  educyears  educrec logearn

. 
.         ***Using the continuous version of &quot;educyears&quot;
.         reg logearn educyears, robust

Linear regression                               Number of obs     =  1,043,212
                                                F(1, 1043210)     =   82897.01
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.0911
                                                Root MSE          =     .99341

------------------------------------------------------------------------------
             |               Robust
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   educyears |   .1377721   .0004785   287.92   0.000     .1368342    .1387099
       _cons |   8.392541   .0066844  1255.55   0.000     8.379439    8.405642
------------------------------------------------------------------------------

.         
</code></pre>
<p><strong>Give an essential summary of the results.</strong><br />
For every additional year of education, we would expect about a 13.8% positive difference in logged earnings. We see that this estimate is statistically significant at p &lt; 0.001, suggesting that this association is not due to chance. We also see that the conditional expectation of log earnings for a person with 0 years of education is about 8.39, or about $4403. This is not practically significant as we would not expect a person to enter the workforce with 0 years of education.</p>
<h5><a href="#create-a-new-variable-called-linearfitted-that-contains-the-fitted-values-from-this-regression" id="create-a-new-variable-called-linearfitted-that-contains-the-fitted-values-from-this-regression">Create a new variable called &ldquo;linearfitted&rdquo; that contains the fitted values from this regression.</a></h5>
<pre><code>.         ***Regressing logged earnings on continuous version of &quot;educyears&quot;
.         cap drop linearfitted 

.         qui reg  logearn educyears, robust // output not shown. same as above. 

.         predict  linearfitted 
(option xb assumed; fitted values)

.         
</code></pre>
<h5><a href="#run-a-regression-to-estimate-the-same-conditional-expectation-but-treating-the-categories-of-the-yeared-variable-as-if-they-were-not-cardinal-create-a-variable-called-discretefitted-with-the-fitted-values-from-this-regression" id="run-a-regression-to-estimate-the-same-conditional-expectation-but-treating-the-categories-of-the-yeared-variable-as-if-they-were-not-cardinal-create-a-variable-called-discretefitted-with-the-fitted-values-from-this-regression">Run a regression to estimate the same conditional expectation, but treating the categories of the &ldquo;yeared&rdquo; variable as if they were not cardinal. Create a variable called &ldquo;discretefitted&rdquo; with the fitted values from this regression.</a></h5>
<pre><code>.         ***Create a set of dummies representing each category of education and use these dummies in the regression instead of the single, continuous &quot;educyears
&gt; &quot; variable.
.         qui tab educyears, gen(educyears_dum) // output not shown

. 
.         ***Regress logged earnings on set of dummies leaving out reference category of no years of education (educyears_dum1). 
.         cap drop discretefitted 

.         reg logearn educyears_dum2-educyears_dum9, robust

Linear regression                               Number of obs     =  1,043,212
                                                F(8, 1043203)     =   19124.23
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.1274
                                                Root MSE          =     .97339

--------------------------------------------------------------------------------
               |               Robust
       logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
educyears_dum2 |  -.0138765   .0216842    -0.64   0.522    -.0563767    .0286237
educyears_dum3 |   .0242233   .0180253     1.34   0.179    -.0111056    .0595523
educyears_dum4 |   .0301227   .0189888     1.59   0.113    -.0070946      .06734
educyears_dum5 |  -.0077545   .0191809    -0.40   0.686    -.0453484    .0298395
educyears_dum6 |  -.3629707   .0192165   -18.89   0.000    -.4006345   -.3253069
educyears_dum7 |   .2684285   .0170629    15.73   0.000     .2349858    .3018712
educyears_dum8 |   .4244066   .0170576    24.88   0.000     .3909742    .4578389
educyears_dum9 |    1.04647   .0170471    61.39   0.000     1.013058    1.079881
         _cons |   9.731789   .0169704   573.46   0.000     9.698528    9.765051
--------------------------------------------------------------------------------

.         predict discretefitted
(option xb assumed; fitted values)

.         
</code></pre>
<p><strong>Write a short paragraph with the essential findings from this specification. How do they differ from the first regression you ran?</strong><br />
We see that the constant, or the conditional expectation of logged earnings for a person with a value of 0 for this variable (no education or preschool), is similar to what was estimated for the continuous educational attainment variable. The constant in this specification is 8.47, or about $4770. Once again, this estimate is not necessarily meaningful as we wouldn&rsquo;t expect many people to enter the labor market with zero years of education. Additionally, we see that the first four indicators of educational attainment (educyears_dum2-5) are not statistically different from zero. This suggests that achieving each of these levels of education is not associated with differences in logged earnings relative to having no years of education (the reference category). This makes sense because the highest level of education represented by this subset of the indicators corresponds with a 10th grade education, which we would assume would be about the earliest a student could leave school for work due to mandatory schooling laws. Interestingly, the &ldquo;educyears_dum6&rdquo; indicator (corresponding to an 11th grade education) is negatively associated with the outcome. This also makes sense if we think about the opportunity cost associated with leaving before attaining a high school degree. The last three indicators, representing at least a high school degree or higher, are positively associated with logged earnings and are all statistically significant at the p&lt;0.001 level.</p>
<p>In short, we can see from this specification that certain additional years of education are more strongly associated with logged earnings than others, which suggests that a linear relationship might obscure important patterns in the data.</p>
<h5><a href="#make-an-overlaid-graph-with-line-graphs-of-the-fitted-values-from-both-regressions" id="make-an-overlaid-graph-with-line-graphs-of-the-fitted-values-from-both-regressions">Make an overlaid graph with line graphs of the fitted values from both regressions.</a></h5>
<pre><code>.         qui codebook linearfitted discretefitted

. 
.         ***Each set of predicted values has 9 unique values. This makes sense if we think about how we are running a simple regression where each of the RHS va
&gt; rs has only 9 values (even the &quot;continuous&quot; version). So we should see a scatter with points &quot;stacked&quot; along 9 points on the x-axis for each specification. 
.         
.         ***This graph takes forever to make with all of the observations so I'm collapsing using the means of the predicted values and logged earnings by the d
&gt; ifferent values of educyears (x-axis variable)
.         preserve 

.                 collapse (mean) logearn linearfitted discretefitted , by(educyears)

. 
.                 graph twoway ///
&gt;                         (connected logearn      discretefitted) ///
&gt;                         (connected logearn      linearfitted) ///
&gt;                         , ///
&gt;                         legend(label(1 &quot;Continuous&quot;) label(2 &quot;Discrete&quot;)) ///
&gt;                         ytitle(&quot;Mean Logged Annual Earnings&quot;) ///
&gt;                         xtitle(&quot;Fitted Values from Regressing Educ. Years on Logged Earnings&quot;)

.          restore        

</code></pre>
<img src="scatter_educ.png" height="400" >
<p><strong>Based on this graph, how do you feel about approximating the CEF as a linear function of the <em>single yeared</em> variable</strong><br />
The graphical evidence supports our conclusions drawn from interpretting coefficients from the two regression specifications. We see that using the continuous version of the educational attainment variable masks important variation in the predicted values of the outcome variable. Thus, approximating the CEF as a linear function of the <em>single yeared</em> variable does not seem like a good choice if our research question is centered on the assocation between educational achievement and annual earnings.</p>
<h2><a href="#experience-and-earnings" id="experience-and-earnings">Experience and Earnings</a></h2>
<h5><a href="#run-a-regression-of-earnings-not-log-earnings-on-experience-and-experience-squared" id="run-a-regression-of-earnings-not-log-earnings-on-experience-and-experience-squared">Run a regression of earnings (not log earnings) on experience and experience squared.</a></h5>
<pre><code>.         ***Limit sample to observations with annual income greater than zero so that the sample will match that used when we use logged income. 
.         reg incwage exper expersq if incwage &gt; 0, robust

Linear regression                               Number of obs     =  1,043,212
                                                F(2, 1043209)     =   71970.21
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.0652
                                                Root MSE          =      47958

------------------------------------------------------------------------------
             |               Robust
     incwage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       exper |   3814.429   12.65501   301.42   0.000     3789.626    3839.233
     expersq |  -82.84785   .3629845  -228.24   0.000    -83.55928   -82.13641
       _cons |   11906.87   65.04905   183.04   0.000     11779.38    12034.37
------------------------------------------------------------------------------

</code></pre>
<p><strong>Interpret the results of this regression.</strong></p>
<h5><a href="#run-a-regression-of-log-earnings-on-experience-and-experience-squared" id="run-a-regression-of-log-earnings-on-experience-and-experience-squared">Run a regression of log earnings on experience and experience squared.</a></h5>
<pre><code>.         reg logearn exper expersq, robust

Linear regression                               Number of obs     =  1,043,212
                                                F(2, 1043209)     =   80664.94
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.1621
                                                Root MSE          =     .95381

------------------------------------------------------------------------------
             |               Robust
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       exper |   .1258925   .0003506   359.05   0.000     .1252053    .1265798
     expersq |   -.002726   9.03e-06  -301.94   0.000    -.0027437   -.0027083
       _cons |   9.189244   .0029542  3110.62   0.000     9.183454    9.195034
------------------------------------------------------------------------------

</code></pre>
<p><strong>Interpret the results of this regression. Which speciﬁcation do you prefer and why?</strong></p>
<h5><a href="#run-the-log-earnings-regression-limiting-the-sample-to-non-immigrants" id="run-the-log-earnings-regression-limiting-the-sample-to-non-immigrants">Run the log earnings regression, limiting the sample to non-immigrants.</a></h5>
<pre><code>.         reg logearn exper expersq if immigrant==0, robust 

Linear regression                               Number of obs     =    884,721
                                                F(2, 884718)      =   76660.25
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.1781
                                                Root MSE          =     .95123

------------------------------------------------------------------------------
             |               Robust
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       exper |   .1310546   .0003849   340.48   0.000     .1303001     .131809
     expersq |  -.0028439   .0000101  -281.78   0.000    -.0028637   -.0028241
       _cons |   9.163987   .0031492  2909.90   0.000     9.157814    9.170159
------------------------------------------------------------------------------

</code></pre>
<h5><a href="#run-the-log-earnings-regression-limiting-the-sample-to-immigrants" id="run-the-log-earnings-regression-limiting-the-sample-to-immigrants">Run the log earnings regression, limiting the sample to immigrants.</a></h5>
<pre><code>.         reg logearn exper expersq if immigrant==1, robust 

Linear regression                               Number of obs     =    158,491
                                                F(2, 158488)      =    5710.71
                                                Prob &gt; F          =     0.0000
                                                R-squared         =     0.0811
                                                Root MSE          =     .95798

------------------------------------------------------------------------------
             |               Robust
     logearn |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       exper |   .0962887   .0009054   106.34   0.000     .0945141    .0980634
     expersq |  -.0021095   .0000211  -100.10   0.000    -.0021508   -.0020682
       _cons |   9.375944   .0086809  1080.07   0.000     9.358929    9.392958
------------------------------------------------------------------------------

</code></pre>
<p><strong>What conclusions can you draw based on these separate regressions?</strong></p>
<h5><a href="#run-an-interaction-model-that-allows-you-to-test-whether-the-cef-has-the-same-slope-for-immigrants-and-non-immigrants-hint-if-you-have-speciﬁed-this-regression-correctly-you-should-receive-identical-parameter-estimates-for-all-of-the-cefs-suggested-by-the-separate-regressions" id="run-an-interaction-model-that-allows-you-to-test-whether-the-cef-has-the-same-slope-for-immigrants-and-non-immigrants-hint-if-you-have-speciﬁed-this-regression-correctly-you-should-receive-identical-parameter-estimates-for-all-of-the-cefs-suggested-by-the-separate-regressions">Run an interaction model that allows you to test whether the CEF has the same slope for immigrants and non-immigrants. HINT: If you have speciﬁed this regression correctly, you should receive identical parameter estimates for all of the CEFs suggested by the separate regressions.</a></h5>
<pre><code>. 
</code></pre>
<p><strong>Can you reject the null that the slope of the CEF does not depend on immigrant status? HINT: Testing this null requires testing a joint null, and thus the “test” command.</strong></p>
<h2><a href="#marital-status-and-earnings" id="marital-status-and-earnings">Marital Status and Earnings</a></h2>
